<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Parmina Network</title>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore-compat.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-100 min-h-screen flex">
  <!-- Sidebar -->
  <aside class="bg-white w-64 p-4 shadow-lg hidden md:block">
    <h2 class="text-2xl font-bold text-green-700 mb-6">Parmina Network</h2>
    <nav>
      <ul class="space-y-2">
        <li><button onclick="showSection('home')" class="text-green-700 hover:underline">🏠 Beranda</button></li>
        <li><button onclick="showSection('network')" class="text-green-700 hover:underline">🌿 Jaringan Saya</button></li>
        <li><button onclick="showSection('komisi')" class="text-green-700 hover:underline">💸 Komisi Saya</button></li>
        <li><button onclick="showSection('bonus')" class="text-green-700 hover:underline">🎁 Bonus Reward</button></li>
        <li><button onclick="showSection('riwayat')" class="text-green-700 hover:underline">📄 Riwayat Transaksi</button></li>
        <li><button onclick="showSection('profil')" class="text-green-700 hover:underline">👤 Profil & Akun</button></li>
      </ul>
    </nav>
  </aside>

  <!-- Content -->
  <main class="flex-1 p-6" id="mainContent">
    <!-- Sections -->
    <section id="homeSection">
      <h1 class="text-2xl font-bold text-green-700 mb-4">Selamat Datang, <span id="userName">User</span></h1>
      <p><strong>Status:</strong> <span id="userStatus" class="font-semibold text-red-600">Belum Aktif Bulan Ini</span></p>
      <p><strong>Pembelian Pribadi:</strong> Rp<span id="personalPurchase">0</span></p>
      <p><strong>Omzet Jaringan:</strong> Rp<span id="networkOmzet">0</span></p>
    </section>

    <section id="networkSection" class="hidden">
      <h2 class="text-xl font-bold text-green-700">Jaringan Saya</h2>
      <p>Struktur generasi 10 akan ditampilkan di sini.</p>
    </section>

    <section id="komisiSection" class="hidden">
      <h2 class="text-xl font-bold text-green-700">Komisi Saya</h2>
      <p>Komisi sponsor, matrix, dan lainnya akan ditampilkan di sini.</p>
    </section>

    <section id="bonusSection" class="hidden">
      <h2 class="text-xl font-bold text-green-700">Bonus Reward</h2>
      <p><a href="bonus.html" class="text-green-600 underline">Klik di sini untuk melihat Bonus Reward</a></p>
    </section>

    <section id="riwayatSection" class="hidden">
      <h2 class="text-xl font-bold text-green-700">Riwayat Transaksi</h2>
      <p>Riwayat pembelian pribadi dan downline akan ditampilkan di sini.</p>
    </section>

    <section id="profilSection" class="hidden">
      <h2 class="text-xl font-bold text-green-700">Profil & Akun</h2>
      <p>Fitur untuk edit profil dan password akan ditambahkan di sini.</p>
    </section>
  </main>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC6CD-KssIaBO0lGZbf5ymrH03uVfbNP-k",
      authDomain: "parminanetwork.firebaseapp.com",
      projectId: "parminanetwork",
      storageBucket: "parminanetwork.firebasestorage.app",
      messagingSenderId: "736943184054",
      appId: "1:736943184054:web:31fed7a4d10442870e2e17"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function showSection(section) {
      const sections = ['home', 'network', 'komisi', 'bonus', 'riwayat', 'profil'];
      sections.forEach(id => {
        document.getElementById(id + 'Section').classList.add('hidden');
      });
      document.getElementById(section + 'Section').classList.remove('hidden');
    }

    firebase.auth().onAuthStateChanged(async (user) => {
      if (user) {
        const userDoc = await db.collection('users').doc(user.uid).get();
        if (userDoc.exists) {
          const data = userDoc.data();
          document.getElementById("userName").textContent = data.nama || "User";
          document.getElementById("personalPurchase").textContent = data.pembelianPribadi || 0;
          document.getElementById("networkOmzet").textContent = data.omzetJaringan || 0;
          const aktif = data.statusAktif === true;
          document.getElementById("userStatus").textContent = aktif ? "Aktif Bulan Ini" : "Belum Aktif Bulan Ini";
          document.getElementById("userStatus").classList.toggle("text-green-600", aktif);
          document.getElementById("userStatus").classList.toggle("text-red-600", !aktif);
        }
      } else {
        window.location.href = "index.html";
      }
    });
  </script>
</body>
</html>
